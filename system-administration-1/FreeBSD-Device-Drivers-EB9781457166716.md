![Cover image for FreeBSD Device Drivers](https://imgdetail.ebookreading.net/cover/cover/system_admin/EB9781457166716.jpg)

[FreeBSD Device Drivers](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_1.html "FreeBSD Device Drivers")
====================================================================================================================

Author : [Joseph Kong](https://ebookreading.net/search/author/Joseph+Kong)

Release Date : 2012/04/01

ISBN : 9781457166716

Topic : [System Administration](https://ebookreading.net/search/category/system-administration)

Book Description
-----------------

FreeBSD Device Drivers is the first and only book to teach readers how to develop device drivers for the FreeBSD operating system. 
              
Table of Contents
-----------------

1. [FreeBSD Device Drivers](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_2.html)
1. [About the Technical Reviewer](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_3.html)
1. [Foreword](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_4.html)
1. [Acknowledgments](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_5.html)
1. [Introduction](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_6.html)
    1. [Who Is This Book For?](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_6.html#who_is_this_book_fo)
    1. [Prerequisites](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_7.html)
    1. [Contents at a Glance](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_8.html)
    1. [Welcome Aboard!](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_9.html)
1. [1. Building and Running Modules](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_10.html)
    1. [Types of Device Drivers](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_10.html#types_of_device_dri)
    1. [Loadable Kernel Modules](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_11.html)
        1. [Module Event Handler](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_11.html#module_event_handle)
        1. [DECLARE_MODULE Macro](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_11.html#declare_underscore_)
            1. [name](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_11.html#name)
            1. [data](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_11.html#data)
            1. [sub](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_11.html#sub)
            1. [order](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_11.html#order)
    1. [Hello, world!](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_12.html)
    1. [Compiling and Loading](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_13.html)
    1. [Character Drivers](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_14.html)
        1. [d_foo Functions](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_14.html#d_underscore_foo_fu)
        1. [Character Device Switch Table](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_14.html#character_device_sw)
        1. [make_dev and destroy_dev Functions](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_14.html#make_underscore_dev)
    1. [Mostly Harmless](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_15.html)
        1. [echo_write Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_15.html#echo_underscore_wri)
        1. [echo_read Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_15.html#echo_underscore_rea)
        1. [echo_modevent Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_15.html#echo_underscore_mod)
        1. [DEV_MODULE Macro](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_15.html#dev_underscore_modu)
        1. [Don’t Panic](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_15.html#donat_panic)
    1. [Block Drivers Are Gone](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_16.html)
    1. [Conclusion](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_17.html)
1. [2. Allocating Memory](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_18.html)
    1. [Memory Management Routines](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_18.html#memory_management_r)
    1. [malloc_type Structures](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_19.html)
        1. [MALLOC_DEFINE Macro](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_19.html#malloc_underscore_d)
        1. [MALLOC_DECLARE Macro](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_19.html#malloc_underscore_d)
    1. [Tying Everything Together](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_20.html)
    1. [Contiguous Physical Memory Management Routines](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_21.html)
    1. [A Straightforward Example](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_22.html)
    1. [Conclusion](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_23.html)
1. [3. Device Communication and Control](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_24.html)
    1. [ioctl](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_24.html#ioctl)
    1. [Defining ioctl Commands](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_25.html)
    1. [Implementing ioctl](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_26.html)
        1. [echo_write Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_26.html#echo_underscore_wri)
        1. [echo_set_buffer_size Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_26.html#echo_underscore_set)
        1. [echo_ioctl Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_26.html#echo_underscore_ioc)
        1. [echo_modevent Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_26.html#echo_underscore_mod)
        1. [Don’t Panic](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_26.html#donat_panic-id1)
    1. [Invoking ioctl](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_27.html)
    1. [sysctl](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_28.html)
    1. [Implementing sysctls, Part 1](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_29.html)
    1. [sysctl Context Management Routines](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_30.html)
    1. [Creating Dynamic sysctls](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_31.html)
        1. [SYSCTL_STATIC_CHILDREN Macro](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_31.html#sysctl_underscore_s)
        1. [SYSCTL_CHILDREN Macro](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_31.html#sysctl_underscore_c)
    1. [Implementing sysctls, Part 2](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_32.html)
        1. [sysctl_set_buffer_size Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_32.html#sysctl_underscore_s)
        1. [Don’t Panic](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_32.html#donat_panic-id2)
    1. [Conclusion](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_33.html)
1. [4. Thread Synchronization](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_34.html)
    1. [A Simple Synchronization Problem](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_34.html#a_simple_synchroniz)
    1. [A More Complex Synchronization Problem](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_35.html)
        1. [race_new Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_35.html#race_underscore_new)
        1. [race_find Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_35.html#race_underscore_fin)
        1. [race_destroy Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_35.html#race_underscore_des)
        1. [race_ioctl Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_35.html#race_underscore_ioc)
        1. [race_modevent Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_35.html#race_underscore_mod)
        1. [The Root of the Problem](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_35.html#the_root_of_the_pro)
    1. [Preventing Race Conditions](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_36.html)
    1. [Mutexes](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_37.html)
        1. [Spin Mutexes](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_37.html#spin_mutexes)
        1. [Sleep Mutexes](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_37.html#sleep_mutexes)
    1. [Mutex Management Routines](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_38.html)
    1. [Implementing Mutexes](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_39.html)
        1. [race_modevent Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_39.html#race_underscore_mod)
        1. [Don’t Panic](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_39.html#donat_panic-id3)
    1. [Shared/Exclusive Locks](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_40.html)
    1. [Shared/Exclusive Lock Management Routines](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_41.html)
    1. [Implementing Shared/Exclusive Locks](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_42.html)
    1. [Reader/Writer Locks](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_43.html)
    1. [Reader/Writer Lock Management Routines](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_44.html)
    1. [Condition Variables](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_45.html)
    1. [Condition Variable Management Routines](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_46.html)
    1. [General Guidelines](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_47.html)
        1. [Avoid Recursing on Exclusive Locks](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_47.html#avoid_recursing_on_)
        1. [Avoid Holding Exclusive Locks for Long Periods of Time](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_47.html#avoid_holding_exclu)
    1. [Conclusion](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_48.html)
1. [5. Delaying Execution](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_49.html)
    1. [Voluntary Context Switching, or Sleeping](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_49.html#voluntary_context_s)
    1. [Implementing Sleeps and Condition Variables](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_50.html)
        1. [sleep_modevent Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_50.html#sleep_underscore_mo)
        1. [load Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_50.html#load_function)
        1. [sleep_thread Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_50.html#sleep_underscore_th)
        1. [sysctl_debug_sleep_test Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_50.html#sysctl_underscore_d)
        1. [unload Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_50.html#unload_function)
        1. [Don’t Panic](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_50.html#donat_panic-id4)
    1. [Kernel Event Handlers](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_51.html)
    1. [Callouts](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_52.html)
    1. [Callouts and Race Conditions](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_53.html)
    1. [Taskqueues](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_54.html)
        1. [Global Taskqueues](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_54.html#global_taskqueues)
        1. [Taskqueue Management Routines](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_54.html#taskqueue_managemen)
    1. [Conclusion](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_55.html)
1. [6. Case Study: Virtual Null Modem](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_56.html)
    1. [Prerequisites](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_56.html#prerequisites-id1)
    1. [Code Analysis](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_57.html)
        1. [nmdm_modevent Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_57.html#nmdm_underscore_mod)
        1. [nmdm_clone Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_57.html#nmdm_underscore_clo)
        1. [nmdm_alloc Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_57.html#nmdm_underscore_all)
        1. [nmdm_outwakeup Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_57.html#nmdm_underscore_out)
        1. [nmdm_task_tty Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_57.html#nmdm_underscore_tas)
        1. [nmdm_inwakeup Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_57.html#nmdm_underscore_inw)
        1. [nmdm_modem Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_57.html#nmdm_underscore_mod)
        1. [nmdm_param Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_57.html#nmdm_underscore_par)
        1. [nmdm_timeout Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_57.html#nmdm_underscore_tim)
        1. [bits_per_char Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_57.html#bits_underscore_per)
        1. [Don’t Panic](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_57.html#donat_panic-id5)
    1. [Conclusion](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_58.html)
1. [7. Newbus and Resource Allocation](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_59.html)
    1. [Autoconfiguration and Newbus Drivers](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_59.html#autoconfiguration_a)
        1. [device_foo Functions](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_59.html#device_underscore_f)
        1. [Device Method Table](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_59.html#device_method_table)
        1. [DRIVER_MODULE Macro](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_59.html#driver_underscore_m)
            1. [name](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_59.html#name-id1)
            1. [busname](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_59.html#busname)
            1. [driver](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_59.html#driver)
            1. [devclass](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_59.html#devclass)
            1. [evh](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_59.html#evh)
            1. [arg](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_59.html#arg)
    1. [Tying Everything Together](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_60.html)
        1. [foo_pci_probe Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_60.html#foo_underscore_pci_)
        1. [foo_pci_attach Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_60.html#foo_underscore_pci_)
        1. [d_foo Functions](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_60.html#d_underscore_foo_fu)
        1. [foo_pci_detach Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_60.html#foo_underscore_pci_)
        1. [Don’t Panic](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_60.html#donat_panic-id6)
    1. [Hardware Resource Management](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_61.html)
    1. [Conclusion](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_62.html)
1. [8. Interrupt Handling](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_63.html)
    1. [Registering an Interrupt Handler](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_63.html#registering_an_inte)
    1. [Interrupt Handlers in FreeBSD](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_64.html)
    1. [Implementing an Interrupt Handler](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_65.html)
        1. [pint_identify Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_65.html#pint_underscore_ide)
        1. [pint_probe Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_65.html#pint_underscore_pro)
        1. [pint_attach Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_65.html#pint_underscore_att)
        1. [pint_detach Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_65.html#pint_underscore_det)
        1. [pint_open Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_65.html#pint_underscore_ope)
        1. [pint_close Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_65.html#pint_underscore_clo)
        1. [pint_write Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_65.html#pint_underscore_wri)
        1. [pint_read Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_65.html#pint_underscore_rea)
        1. [pint_intr Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_65.html#pint_underscore_int)
        1. [Don’t Panic](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_65.html#donat_panic-id7)
    1. [Generating Interrupts on the Parallel Port](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_66.html)
    1. [Conclusion](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_67.html)
1. [9. Case Study: Parallel Port Printer Driver](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_68.html)
    1. [Code Analysis](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_68.html#code_analysis-id1)
        1. [lpt_identify Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_68.html#lpt_underscore_iden)
        1. [lpt_probe Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_68.html#lpt_underscore_prob)
        1. [lpt_detect Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_68.html#lpt_underscore_dete)
        1. [lpt_port_test Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_68.html#lpt_underscore_port)
        1. [lpt_attach Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_68.html#lpt_underscore_atta)
        1. [lpt_detach Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_68.html#lpt_underscore_deta)
        1. [lpt_open Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_68.html#lpt_underscore_open)
        1. [lpt_read Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_68.html#lpt_underscore_read)
        1. [lpt_write Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_68.html#lpt_underscore_writ)
        1. [lpt_intr Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_68.html#lpt_underscore_intr)
        1. [lpt_timeout Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_68.html#lpt_underscore_time)
        1. [lpt_push_bytes Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_68.html#lpt_underscore_push)
        1. [lpt_close Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_68.html#lpt_underscore_clos)
        1. [lpt_ioctl Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_68.html#lpt_underscore_ioct)
        1. [lpt_request_ppbus Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_68.html#lpt_underscore_requ)
        1. [lpt_release_ppbus Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_68.html#lpt_underscore_rele)
    1. [Conclusion](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_69.html)
1. [10. Managing and Using Resources](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_70.html)
    1. [I/O Ports and I/O Memory](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_70.html#i_solidus_o_ports_a)
        1. [Reading from I/O Ports and I/O Memory](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_70.html#reading_from_i_soli)
        1. [Writing to I/O Ports and I/O Memory](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_70.html#writing_to_i_solidu)
        1. [Stream Operations](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_70.html#stream_operations)
    1. [Memory Barriers](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_71.html)
    1. [Tying Everything Together](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_72.html)
        1. [led_identify Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_72.html#led_underscore_iden)
        1. [led_probe Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_72.html#led_underscore_prob)
        1. [led_attach Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_72.html#led_underscore_atta)
        1. [led_detach Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_72.html#led_underscore_deta)
        1. [led_open Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_72.html#led_underscore_open)
        1. [led_close Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_72.html#led_underscore_clos)
        1. [led_read Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_72.html#led_underscore_read)
        1. [led_write Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_72.html#led_underscore_writ)
    1. [Conclusion](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_73.html)
1. [11. Case Study: Intelligent Platform Management Interface Driver](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_74.html)
    1. [Code Analysis](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_74.html#code_analysis-id2)
        1. [ipmi_pci_probe Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_74.html#ipmi_underscore_pci)
        1. [ipmi_pci_match Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_74.html#ipmi_underscore_pci)
        1. [ipmi_pci_attach Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_74.html#ipmi_underscore_pci)
        1. [ipmi2_pci_probe Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_74.html#ipmi2_underscore_pc)
        1. [ipmi2_pci_attach Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_74.html#ipmi2_underscore_pc)
    1. [Conclusion](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_75.html)
1. [12. Direct Memory Access](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_76.html)
    1. [Implementing DMA](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_76.html#implementing_dma)
        1. [Initiating a DMA Data Transfer](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_76.html#initiating_a_dma_da)
        1. [Dismantling DMA](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_76.html#dismantling_dma)
    1. [Creating DMA Tags](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_77.html)
    1. [Tearing Down DMA Tags](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_78.html)
    1. [DMA Map Management Routines, Part 1](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_79.html)
    1. [Loading (DMA) Buffers into DMA Maps](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_80.html)
        1. [bus_dma_segment Structures](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_80.html#bus_underscore_dma_)
        1. [bus_dmamap_load Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_80.html#bus_underscore_dmam)
        1. [bus_dmamap_load_mbuf Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_80.html#bus_underscore_dmam)
        1. [bus_dmamap_load_mbuf_sg Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_80.html#bus_underscore_dmam)
        1. [bus_dmamap_load_uio Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_80.html#bus_underscore_dmam)
        1. [bus_dmamap_unload Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_80.html#bus_underscore_dmam)
    1. [DMA Map Management Routines, Part 2](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_81.html)
    1. [A Straightforward Example](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_82.html)
    1. [Synchronizing DMA Buffers](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_83.html)
    1. [Conclusion](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_84.html)
1. [13. Storage Drivers](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_85.html)
    1. [disk Structures](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_85.html#disk_structures)
        1. [Descriptive Fields](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_85.html#descriptive_fields)
        1. [Storage Device Methods](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_85.html#storage_device_meth)
        1. [Mandatory Media Properties](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_85.html#mandatory_media_pro)
        1. [Optional Media Properties](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_85.html#optional_media_prop)
        1. [Driver Private Data](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_85.html#driver_private_data)
    1. [disk Structure Management Routines](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_86.html)
    1. [Block I/O Structures](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_87.html)
    1. [Block I/O Queues](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_88.html)
    1. [Tying Everything Together](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_89.html)
        1. [at45d_attach Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_89.html#at45d_underscore_at)
        1. [at45d_delayed_attach Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_89.html#at45d_underscore_de)
        1. [at45d_get_info Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_89.html#at45d_underscore_ge)
        1. [at45d_wait_for_device_ready Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_89.html#at45d_underscore_wa)
        1. [at45d_get_status Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_89.html#at45d_underscore_ge)
        1. [at45d_strategy Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_89.html#at45d_underscore_st)
        1. [at45d_task Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_89.html#at45d_underscore_ta)
    1. [Block I/O Completion Routines](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_90.html)
    1. [Conclusion](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_91.html)
1. [14. Common Access Method](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_92.html)
    1. [How CAM Works](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_92.html#how_cam_works)
    1. [A (Somewhat) Simple Example](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_93.html)
        1. [mfip_attach Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_93.html#mfip_underscore_att)
        1. [mfip_detach Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_93.html#mfip_underscore_det)
        1. [mfip_action Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_93.html#mfip_underscore_act)
        1. [mfip_poll Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_93.html#mfip_underscore_pol)
        1. [mfip_start Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_93.html#mfip_underscore_sta)
        1. [mfip_done Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_93.html#mfip_underscore_don)
    1. [SIM Registration Routines](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_94.html)
        1. [cam_simq_alloc Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_94.html#cam_underscore_simq)
        1. [cam_sim_alloc Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_94.html#cam_underscore_sim_)
        1. [xpt_bus_register Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_94.html#xpt_underscore_bus_)
    1. [Action Routines](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_95.html)
        1. [XPT_PATH_INQ](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_95.html#xpt_underscore_path)
        1. [XPT_RESET_BUS](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_95.html#xpt_underscore_rese)
        1. [XPT_GET_TRAN_SETTINGS](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_95.html#xpt_underscore_get_)
        1. [XPT_SET_TRAN_SETTINGS](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_95.html#xpt_underscore_set_)
        1. [XPT_SCSI_IO](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_95.html#xpt_underscore_scsi)
        1. [XPT_RESET_DEV](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_95.html#xpt_underscore_rese)
    1. [Conclusion](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_96.html)
1. [15. USB Drivers](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_97.html)
    1. [About USB Devices](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_97.html#about_usb_devices)
    1. [More About USB Devices](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_98.html)
    1. [USB Configuration Structures](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_99.html)
        1. [Mandatory Fields](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_99.html#mandatory_fields)
        1. [Optional Fields](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_99.html#optional_fields)
        1. [USB Transfer Flags](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_99.html#usb_transfer_flags)
    1. [USB Transfers (in FreeBSD)](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_100.html)
    1. [USB Configuration Structure Management Routines](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_101.html)
    1. [USB Methods Structure](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_102.html)
    1. [Tying Everything Together](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_103.html)
        1. [ulpt_probe Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_103.html#ulpt_underscore_pro)
        1. [ulpt_attach Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_103.html#ulpt_underscore_att)
        1. [ulpt_detach Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_103.html#ulpt_underscore_det)
        1. [ulpt_open Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_103.html#ulpt_underscore_ope)
        1. [ulpt_reset Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_103.html#ulpt_underscore_res)
        1. [unlpt_open Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_103.html#unlpt_underscore_op)
        1. [ulpt_close Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_103.html#ulpt_underscore_clo)
        1. [ulpt_ioctl Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_103.html#ulpt_underscore_ioc)
        1. [ulpt_watchdog Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_103.html#ulpt_underscore_wat)
        1. [ulpt_start_read Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_103.html#ulpt_underscore_sta)
        1. [ulpt_stop_read Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_103.html#ulpt_underscore_sto)
        1. [ulpt_start_write Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_103.html#ulpt_underscore_sta)
        1. [ulpt_stop_write Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_103.html#ulpt_underscore_sto)
        1. [ulpt_write_callback Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_103.html#ulpt_underscore_wri)
        1. [ulpt_read_callback Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_103.html#ulpt_underscore_rea)
        1. [ulpt_status_callback Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_103.html#ulpt_underscore_sta)
    1. [Conclusion](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_104.html)
1. [16. Network Drivers, Part 1: Data Structures](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_105.html)
    1. [Network Interface Structures](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_105.html#network_interface_s)
    1. [Network Interface Structure Management Routines](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_106.html)
        1. [ether_ifattach Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_106.html#ether_underscore_if)
        1. [ether_ifdetach Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_106.html#ether_underscore_if)
    1. [Network Interface Media Structures](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_107.html)
    1. [Network Interface Media Structure Management Routines](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_108.html)
    1. [Hello, world!](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_109.html)
    1. [mbuf Structures](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_110.html)
    1. [Message Signaled Interrupts](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_111.html)
    1. [Implementing MSI](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_112.html)
    1. [MSI Management Routines](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_113.html)
    1. [Conclusion](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_114.html)
1. [17. Network Drivers, Part 2: Packet Reception and Transmission](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_115.html)
    1. [Packet Reception](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_115.html#packet_reception)
        1. [em_rxeof Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_115.html#em_underscore_rxeof)
        1. [em_handle_rx Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_115.html#em_underscore_handl)
    1. [Packet Transmission](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_116.html)
        1. [em_start_locked Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_116.html#em_underscore_start)
        1. [em_txeof Function](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_116.html#em_underscore_txeof)
    1. [Post Packet Transmission](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_117.html)
    1. [Conclusion](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_118.html)
1. [References](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_119.html)
1. [Index](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_120.html)
1. [About the Author](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_121.html)
1. [Colophon](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_122.html)
1. [A. UPDATES](https://ebookreading.net/view/book/FreeBSD+Device+Drivers-EB9781457166716_123.html)
